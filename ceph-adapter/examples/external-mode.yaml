# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
# Example: External mode
#
# Use this when connecting to a non-Rook Ceph cluster:
#   - Ceph deployed via cephadm
#   - Manually deployed Ceph cluster
#   - Any Ceph cluster without Rook Operator
#
# Features:
#   - No Rook Operator or CSI driver required
#   - Manual configuration of mon_host and keyring
#   - Works with any Ceph cluster
#
# Prerequisites:
#   - Ceph monitor addresses
#   - Ceph client keyring with appropriate permissions
#   - Network connectivity to Ceph monitors
#
# Deploy with:
#   helm upgrade --install ceph-adapter-rook ./ceph-adapter-rook \
#     --namespace=openstack \
#     --create-namespace \
#     -f examples/external-mode.yaml

deployment:
  mode: external

external:
  # Ceph monitor hosts (required)
  # Format: comma-separated or space-separated
  mon_host: "10.0.0.1:6789,10.0.0.2:6789,10.0.0.3:6789"

  # Keyring configuration (one of the following is required)
  keyring:
    # Option 1: Provide keyring directly (for testing/development)
    # key: "AQDxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxQ=="

    # Option 2: Reference an existing secret (recommended for production)
    # First create the secret:
    #   kubectl -n openstack create secret generic external-ceph-keyring \
    #     --from-literal=key="AQDxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxQ=="
    secret_ref:
      name: external-ceph-keyring
      # namespace: ""  # Optional: defaults to deployment namespace
      key: key

  # Ceph user name associated with the keyring
  ceph_user: admin

output:
  # Secret name for the Ceph client keyring
  secret_name: pvc-ceph-client-key

  # ConfigMap name for ceph.conf
  configmap_name: ceph-etc

conf:
  ceph:
    global:
      auth_cluster_required: cephx
      auth_service_required: cephx
      auth_client_required: cephx
    # Optional: Add client-specific settings
    # client:
    #   rbd_cache: "true"
    #   rbd_cache_size: "134217728"
...
