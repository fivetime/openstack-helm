# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
# Example: External mode
#
# Use this when connecting to a non-Rook Ceph cluster:
#   - Ceph deployed via cephadm
#   - Manually deployed Ceph cluster
#   - Any Ceph cluster without Rook Operator
#
# Features:
#   - No Rook Operator or CSI driver required
#   - Manual configuration of mon_host and keyring
#   - Works with any Ceph cluster
#
# Prerequisites:
#   - Ceph monitor addresses
#   - Ceph client keyring with appropriate permissions
#   - Network connectivity to Ceph monitors
#
# Deploy with:
#   # First create the keyring secret:
#   kubectl -n openstack create secret generic external-ceph-keyring \
#     --from-literal=key="AQDxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxQ=="
#
#   # Then deploy:
#   helm upgrade --install ceph-adapter-rook ./ceph-adapter-rook \
#     --namespace=openstack \
#     --create-namespace \
#     --set cluster.mode=external \
#     --set cluster.mon_host="10.0.0.1:6789,10.0.0.2:6789,10.0.0.3:6789" \
#     --set cluster.keyring.secret_ref.name=external-ceph-keyring

cluster:
  mode: external

  # Ceph monitor hosts (required)
  mon_host: "10.0.0.1:6789,10.0.0.2:6789,10.0.0.3:6789"

  # Ceph user name
  user: admin

  # Keyring configuration (one of the following is required)
  keyring:
    # Option 1: Provide keyring directly (for testing/development)
    # key: "AQDxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxQ=="

    # Option 2: Reference an existing secret (recommended for production)
    secret_ref:
      name: external-ceph-keyring
      # namespace: ""  # Optional: defaults to deployment namespace
      key: key

output:
  secret_name: pvc-ceph-client-key
  configmap_name: ceph-etc

conf:
  ceph:
    global:
      auth_cluster_required: cephx
      auth_service_required: cephx
      auth_client_required: cephx
...
